{"filter":false,"title":"compile.py","tooltip":"/mydiycc/my008/compile.py","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":62,"column":4},"action":"insert","lines":["import inspect","import ply.yacc as yacc","from lex import tokens","from codegen import codegen ","","#+- < *\\","precedence = (","            ('left','OPTASU','OPHIKU'),","            ('left','OPKAKE'),","        )","","#定義","def p_top(p):","    '''","    teigi : kansuuteigi","    '''","    ","    p[0] = [p[1]]","","def p_kansuuteigi(p):","    '''","    kansuuteigi : SYMBOL SYMBOL KAKKO KOKKA LBRACE bunlist RBRACE","    '''","    p[0] = ['func',p[1],p[2],p[6]]","","def p_bunlist(p):","    '''","    bunlist : RETURN expression SEMI","    '''","    p[0] = [p[1],p[2],p[3]]","","def p_expression(p):","    '''","    expression : NUMBER","               | expression OPTASU expression","               | expression OPHIKU expression","               | expression OPKAKE expression","    '''","    ","    if(len(p) == 2):","        p[0] = ['NUM', p[1]]","    else:","        p[0] = [p[2],p[1],p[3]]","","# syntax error","def p_error(p):","    print ('Syntax error %s' % p)","","parser = yacc.yacc()","","#テスト実行","if __name__== '__main__':","    s = '''","    int main(){","        return 3+2*3;","    }","    '''","    result= parser.parse(s)","    print(\"==AST==\")","    print(result)","    #codegen(result, 'out.s')","","    "],"id":1}],[{"start":{"row":60,"column":4},"end":{"row":60,"column":5},"action":"remove","lines":["#"],"id":2}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":62,"column":4},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1693549936902,"hash":"db650cae423df9e0313c656228d9edb0bd900dd6"}