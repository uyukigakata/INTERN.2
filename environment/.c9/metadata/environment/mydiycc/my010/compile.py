{"filter":false,"title":"compile.py","tooltip":"/mydiycc/my010/compile.py","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":82,"column":4},"action":"insert","lines":["import inspect","import ply.yacc as yacc","from lex import tokens","from codegen import codegen ","","#+- < *\\","precedence = (","            ('left','OPTASU','OPHIKU'),","            ('left','OPKAKE'),",")","","#定義","def p_top(p):","    '''","    teigi : kansuuteigi","    '''","    ","    p[0] = [p[1]]","","def p_kansuuteigi(p):","    '''","    kansuuteigi : TYPE SYMBOL KAKKO KOKKA LBRACE bunlist RBRACE","    '''","    p[0] = ['func',p[1],p[2],p[6]]","","def p_bunlist(p):","    '''","    bunlist : bun","            | bunlist bun","    '''","    if (len(p) == 2):","        p[0] = [p[1]]","    else:","        tmp = p[1]","        tmp.append(p[2])","        p[0] = tmp","","def p_bun_return(p):","    '''","    bun : RETURN expression SEMI","    '''","    p[0] = [p[1],p[2]]","","def p_bun_sengen(p):","    '''","    bun : TYPE SYMBOL SEMI","    '''","    p[0] = ['SENGEN',p[1],p[2]]","","def p_expression(p):","    '''","    expression : NUMBER","               | expression OPTASU expression","               | expression OPHIKU expression","               | expression OPKAKE expression","    '''","    ","    if(len(p) == 2):","        p[0] = ['NUM', p[1]]","    else:","        p[0] = [p[2],p[1],p[3]]","","# syntax error","def p_error(p):","    print ('Syntax error %s' % p)","","parser = yacc.yacc()","","#テスト実行","if __name__== '__main__':","    s = '''","    int main(){","        int x;","        int y;","        return 3+2*3;","    }","    '''","    result= parser.parse(s)","    print(\"==AST==\")","    print(result)","    #codegen(result, 'out.s')","","    "],"id":1}],[{"start":{"row":80,"column":4},"end":{"row":80,"column":5},"action":"remove","lines":["#"],"id":2}]]},"ace":{"folds":[],"scrolltop":924,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":82,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":52,"state":"qstring3","mode":"ace/mode/python"}},"timestamp":1693908896646,"hash":"09f4c969dc15cda75d94f90f7088db4b0c9631f9"}